!function(e,t){function a(e){var t,a={};if(-1!=e.indexOf("&")){t=e.split("&");for(var n=0;n<t.length;n++)a[t[n].split("=")[0]]=t[n].split("=")[1]}else{var l=e.substring(0,e.indexOf("=")),c=e.substr(e.indexOf("=")+1);a[l]=decodeURI(c)}return a}e.Spa=function(){var e=this,t={ctl:"page page-from-center-to-left",rtc:"page page-from-right-to-center",ctr:"page page-from-center-to-right",ltc:"page page-from-left-to-center"};e.version="1.0.0",e.cache=[],e.callBack=[],e.router={go:function(a,n){function l(e){"pageFromRightToCenter"===e.animationName&&(p.callBackFn("after",a,o),i.removeEventListener("animationend",l,!1))}var c,r,i,o,u=e.getElm(".page"),s=u.length,f=e.cache,g=!1,p=this;if(0===s)throw"找不到任何页面";if(0===f.length&&f.push(u[0]),f.length>0)for(var h=0,d=f.length;d>h;h++)f[h].attributes["data-page"].value===a&&(g=!0);if(g)return console.log("该页面已存在");for(var m=0;s>m;m++)u[m].attributes["data-page"].value===a&&(c=u[m],f.push(c));r=f[f.length-2],i=f[f.length-1],o={from:r.attributes["data-page"].value,current:i.attributes["data-page"].value,query:n||null},p.callBackFn("before",a,o),r.className=t.ctl,i.className=t.rtc,r.style.zIndex=f.length-2,i.style.zIndex=f.length-1,i.addEventListener("animationend",l,!1)},back:function(){if(0!==e.cache.lenght){var a=e.cache.pop();a.className=t.ctr,e.cache[e.cache.length-1].className=t.ltc,console.log(e.cache)}},before:function(t,a){e.callBack.push({type:"before",query:t,callback:a||null})},after:function(t,a){e.callBack.push({type:"after",query:t,callback:a||null})},callBackFn:function(t,a,n){for(var l=-1,c=e.callBack.length-1;c>l;c--)if(e.callBack[c].type===t&&e.callBack[c].query===a){e.callBack[c].callback(n);break}}},e.getElm=function(e){var t=null,a=e.substr(1);return t=e.indexOf("#")>-1?document.getElementById(a):document.getElementsByClassName(a)}},document.addEventListener("click",function(e){if("A"===e.target.tagName){e.preventDefault();var t=e.target,n=t.attributes.href.value;if(-1===n.indexOf("#")||1===n.length)return;app.router.go(n.split("?")[0].substr(1),a(n.split("?")[1]))}})}(window);